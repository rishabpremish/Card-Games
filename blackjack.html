<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack - Retro Card Game</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <style>
        /* specific blackjack styles */
        .blackjack-table {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 40px;
            width: 100%;
        }
        
        .hand-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 200px;
        }

        .hand-cards {
            display: flex;
            gap: 10px; /* Overlap slightly less than higher/lower stacks */
            margin-top: 10px;
            min-height: 154px;
            justify-content: center;
        }

        .hand-cards .card {
            position: relative; /* Not absolute like in the grid stacks */
            width: 110px;
            height: 154px;
            margin-left: -40px; /* Overlap effect */
            transition: margin-left 0.3s;
        }
        
        .hand-cards .card:first-child {
            margin-left: 0;
        }

        .hand-cards .card:hover {
            margin-left: -10px; /* Slight expansion on hover */
            z-index: 10;
        }
        
        .hand-label {
            font-family: 'Press Start 2P', cursive;
            color: var(--retro-cyan);
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .hand-score {
            font-family: 'Press Start 2P', cursive;
            color: var(--retro-yellow);
            margin-left: 10px;
        }

        .controls-area {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .action-btn {
            font-family: 'Press Start 2P', cursive;
            padding: 15px 30px;
            cursor: pointer;
            border: var(--pixel-border);
            text-transform: uppercase;
            font-size: 0.8rem;
            transition: var(--transition-fast);
        }

        .btn-hit {
            background: var(--retro-green);
            color: var(--bg-primary);
            border-color: #00cc00;
        }
        
        .btn-stand {
            background: var(--retro-red);
            color: var(--text-primary);
            border-color: #cc0000;
        }

        .btn-deal {
            background: var(--retro-yellow);
            color: var(--bg-primary);
            border-color: var(--retro-orange);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: transparent;
            border: 2px solid var(--text-secondary);
            color: var(--text-secondary);
            padding: 8px 15px;
            font-family: 'Press Start 2P', cursive;
            font-size: 0.6rem;
            cursor: pointer;
        }
        
        .back-btn:hover {
            border-color: var(--retro-cyan);
            color: var(--retro-cyan);
        }

        /* Message Overlay for Win/Loss */
        .message-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 4px solid var(--retro-magenta);
            padding: 20px;
            text-align: center;
            z-index: 50;
            display: none;
            pointer-events: none; /* Let clicks pass through if needed, or handle clicks */
        }
        .message-overlay.visible {
            display: block;
            animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

    </style>
</head>
<body>
    <div class="game-container">
        <!-- Background decoration -->
        <div class="bg-decoration"></div>
        
        <!-- Back to Main Game -->
        <button class="back-btn" onclick="window.location.href='index.html'">‚Üê Back</button>

        <!-- Header -->
        <header class="game-header">
            <h1>BLACKJACK</h1>
            <p class="subtitle">Beat the Dealer to 21</p>
        </header>

        <!-- Game Stats -->
        <div class="game-stats">
            <div class="stat-item wallet-stat">
                <span class="stat-label">Wallet</span>
                <span class="stat-value" id="wallet-balance">$100</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Current Bet</span>
                <span class="stat-value" id="current-bet">$0</span>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area blackjack-table">
            
            <!-- Dealer Hand -->
            <div class="hand-area" id="dealer-area">
                <div class="hand-label">Dealer <span id="dealer-score" class="hand-score">0</span></div>
                <div class="hand-cards" id="dealer-cards">
                    <!-- Cards go here -->
                </div>
            </div>

            <!-- Message Overlay -->
            <div id="message-overlay" class="message-overlay">
                <h2 id="message-text" style="color: var(--retro-yellow); font-family: 'Press Start 2P'; margin-bottom: 10px;">YOU WIN!</h2>
                <p id="message-sub" style="color: #fff; font-family: 'VT323'; font-size: 1.5rem;">+$20</p>
            </div>

            <!-- Player Hand -->
            <div class="hand-area" id="player-area">
                <div class="hand-label">Player <span id="player-score" class="hand-score">0</span></div>
                <div class="hand-cards" id="player-cards">
                    <!-- Cards go here -->
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-area" id="game-controls" style="display: none;">
                <button class="action-btn btn-hit" id="btn-hit">HIT</button>
                <button class="action-btn btn-stand" id="btn-stand">STAND</button>
            </div>
            
            <div class="controls-area" id="bet-controls">
                <button class="action-btn btn-deal" id="btn-open-bet">PLACE BET</button>
            </div>

        </div>

        <!-- Betting Modal (Reused structure) -->
        <div class="modal-overlay" id="betting-modal">
            <div class="modal">
                <button class="settings-close" id="close-bet-modal" style="position: absolute; top: 10px; right: 10px;">‚úï</button>
                <div class="modal-icon">üé∞</div>
                <h2>Place Your Bet</h2>
                <div class="betting-controls">
                    <div class="current-balance">Balance: <span id="betting-balance">$100</span></div>
                    
                    <div class="bet-input-wrapper">
                        <div class="bet-input-container">
                            <span class="currency-symbol">$</span>
                            <input type="number" id="bet-input" min="1" value="10">
                        </div>
                        <div class="bet-slider-container">
                            <input type="range" id="bet-slider" min="1" max="100" value="10">
                        </div>
                    </div>

                    <div class="potential-payout">
                        <span>Payout (2x):</span>
                        <span id="potential-payout-value" class="payout-amount">$20</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button class="bet-btn" id="btn-all-in">ALL IN!</button>
                    <button class="play-btn" id="btn-place-bet">DEAL CARDS</button>
                </div>
            </div>
        </div>
        
        <!-- Settings Button (Hidden but keeps layout if needed, or just remove) -->
        <!-- <button class="settings-hint">Settings</button> -->
    </div>

    <script src="blackjack.js"></script>
    <script src="dev.js"></script>
</body>
</html>
